(this["webpackJsonpcometchat-web-uikit"]=this["webpackJsonpcometchat-web-uikit"]||[]).push([[0],Array(19).concat([function(e,t,a){e.exports=a.p+"static/media/call-blue-icon.368958cc.svg"},function(e,t,a){e.exports=a.p+"static/media/details-pane-blue-icon.64e3a549.svg"},function(e,t,a){e.exports=a.p+"static/media/video-call-blue-icon.6935c8e5.svg"},,,,,,function(e,t,a){e.exports=a.p+"static/media/avatar.bc560060.png"},,function(e,t,a){e.exports=a.p+"static/media/people-grey-icon.5b3e3d14.svg"},function(e,t,a){e.exports=a.p+"static/media/people-blue-icon.92d29b43.svg"},function(e,t,a){e.exports=a.p+"static/media/call-grey-icon.dde8dddb.svg"},function(e,t,a){e.exports=a.p+"static/media/call-blue-icon.368958cc.svg"},function(e,t,a){e.exports=a.p+"static/media/chat-grey-icon.44781a7d.svg"},function(e,t,a){e.exports=a.p+"static/media/chat-blue-icon.f2b6b911.svg"},function(e,t,a){e.exports=a.p+"static/media/group-chat-grey-icon.79399539.svg"},function(e,t,a){e.exports=a.p+"static/media/group-chat-blue-icon.41e7f079.svg"},function(e,t,a){e.exports=a.p+"static/media/more-grey-icon.a9bb9e7f.svg"},function(e,t,a){e.exports=a.p+"static/media/more-blue-icon.ac4e5e40.svg"},,function(e,t,a){e.exports=a.p+"static/media/rounded-plus-grey-icon.9e7719df.svg"},function(e,t,a){e.exports=a.p+"static/media/send-blue-icon.70c145e8.svg"},,,function(e,t,a){e.exports=a(74)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(26),c=a.n(i),r=(a(49),a(1)),o=a(2),l=a(5),u=a(4),m=a(6),h=(a(50),a(51),a(52),a(9)),d=a(8),p=(a(53),a(54),a(55),a(27)),g=a.n(p),f=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={src:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("span",{className:"cp-avatar-wrapper"},s.a.createElement("img",{className:"cp-avatar",src:this.state.src?this.state.src:g.a,alt:"User"}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),t}(s.a.Component),v=f;f.defaultProps={src:""};var b=a(75),C=a(76),E=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={user:{}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"cp-userview",onClick:function(){e.props.onClick&&e.props.onClick(e.state.user)}},s.a.createElement(b.a,null,s.a.createElement(C.a,{xs:1},s.a.createElement(v,{src:this.state.user.avatar})),s.a.createElement(C.a,{className:"cp-user-info"},s.a.createElement("div",{className:"cp-username"},s.a.createElement("div",{className:"font-bold"},this.state.user.name)))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),t}(s.a.Component),y=E;E.defaultProps={user:{}};var O=a(3),k=function(){function e(){Object(r.a)(this,e),this.usersRequest=(new O.CometChat.UsersRequestBuilder).setLimit(12).build()}return Object(o.a)(e,[{key:"isCometChatUserLogedIn",value:function(){var e=this,t=0;return new Promise((function(a,n){1e4===t&&n(),e.isUserLogedIn=setInterval((function(){O.CometChat.isInitialized()?O.CometChat.getLoggedinUser().then((function(t){e.logedInUser=t,clearInterval(e.isUserLogedIn),a(t)}),(function(e){})):console.log("Else"),t=100}),100)}))}},{key:"fetchNextContacts",value:function(){return this.usersRequest.fetchNext()}},{key:"attachUserListener",value:function(e){O.CometChat.addUserListener("UNIQUE_LISTENER_ID",new O.CometChat.UserListener({onUserOnline:function(t){console.log("On User Online:",{onlineUser:t}),e(t)},onUserOffline:function(t){console.log("On User Offline:",{offlineUser:t}),e(t)}}))}}]),e}(),L=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleClick=function(e){a.props.onItemClick(e,"user")},a.state={userlist:[],onItemClick:null},a.getUsersList=a.getUsersList.bind(Object(d.a)(a)),a.handleScroll=a.handleScroll.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.cometChatManager=new k,this.getUsersList(),this.cometChatManager.attachUserListener(this.userUpdated)}},{key:"handleScroll",value:function(e){Math.round(e.currentTarget.scrollHeight-e.currentTarget.scrollTop)===Math.round(e.currentTarget.clientHeight)&&this.getUsersList()}},{key:"userUpdated",value:function(e){var t=this.state.userlist;t.map((function(a,n){a.uid!==e.uid||t.splice(n,1,e)})),this.setState({userlist:t})}},{key:"getUsersList",value:function(){var e=this;this.cometChatManager.isCometChatUserLogedIn().then((function(t){e.cometChatManager.fetchNextContacts().then((function(t){e.setState({userlist:[].concat(Object(h.a)(e.state.userlist),Object(h.a)(t))})}),(function(e){console.error("Handle the erros in conatct List",e)}))}),(function(e){console.error("Handle the erros in conatct List",e)}))}},{key:"displayUserList",value:function(){var e=this,t="";if(this.state.userlist.length>0)return this.state.userlist.map((function(a,n){return a.name.substring(0,1).toUpperCase()!==t?(t=a.name.substring(0,1).toUpperCase(),s.a.createElement("div",{id:n,onClick:function(){return e.handleClick(a)},key:a.uid},s.a.createElement("div",{className:"cp-contact-alphabet font-bold"},t),s.a.createElement(y,{key:a.uid,user:a}),s.a.createElement(b.a,{className:"cp-list-seperator"}))):s.a.createElement("div",{id:n,onClick:function(){return e.handleClick(a)},key:a.uid},s.a.createElement(y,{key:a.uid,user:a}),s.a.createElement(b.a,{className:"cp-list-seperator"}))}))}},{key:"render",value:function(){return s.a.createElement("div",{style:{height:"100%",overflow:"hidden"}},s.a.createElement("p",{className:"cp-contact-list-title font-extra-large"},"Contacts"),s.a.createElement("p",{className:"cp-searchbar"},s.a.createElement("input",{className:"font-normal",type:"text",placeholder:"Search","aria-label":"Search"})),s.a.createElement("div",{className:"cp-userlist",onScroll:this.handleScroll},this.displayUserList()))}}]),t}(s.a.Component),j=L;L.defaultProps={userlist:{}};a(56),a(57);var N=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={group:{}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"cp-groupview",onClick:function(){e.props.onClick&&e.props.onClick(e.state.group)}},s.a.createElement(b.a,null,s.a.createElement(C.a,{xs:1},s.a.createElement(v,{src:this.state.group.icon})),s.a.createElement(C.a,{className:"cp-user-info"},s.a.createElement("div",{className:"cp-username"},s.a.createElement("div",{className:"font-bold"},this.state.group.name)))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),t}(s.a.Component),U=N;N.defaultProps={group:{}};var M=function(){function e(){Object(r.a)(this,e),this.groupsRequest=(new O.CometChat.GroupsRequestBuilder).setLimit(20).build()}return Object(o.a)(e,[{key:"isCometChatUserLogedIn",value:function(){var e=this,t=0;return new Promise((function(a,n){1e4===t&&n(),e.isUserLogedIn=setInterval((function(){O.CometChat.isInitialized()?O.CometChat.getLoggedinUser().then((function(t){e.logedInUser=t,clearInterval(e.isUserLogedIn),a(t)}),(function(e){})):console.log("Else"),t=100}),100)}))}},{key:"fetchNextGroups",value:function(){return this.groupsRequest.fetchNext()}},{key:"attachGroupListener",value:function(e){O.CometChat.addGroupListener("UNIQUE_LISTENER_ID",new O.CometChat.GroupListener({onUserOnline:function(t){console.log("On User Online:",{onlineUser:t}),e(t)},onUserOffline:function(t){console.log("On User Offline:",{offlineUser:t}),e(t)}}))}}]),e}(),I=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleClick=function(e){a.props.onItemClick(e,"group")},a.state={grouplist:[],onItemClick:null},a.getGroupsList=a.getGroupsList.bind(Object(d.a)(a)),a.handleScroll=a.handleScroll.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.cometChatManager=new M,this.getGroupsList(),this.cometChatManager.attachGroupListener(this.groupUpdated)}},{key:"handleScroll",value:function(e){Math.round(e.currentTarget.scrollHeight-e.currentTarget.scrollTop)===Math.round(e.currentTarget.clientHeight)&&this.getGroupsList()}},{key:"groupUpdated",value:function(e){var t=this.state.grouplist;t.map((function(a,n){a.uid!==e.uid||t.splice(n,1,e)})),this.setState({grouplist:t})}},{key:"getGroupsList",value:function(){var e=this;this.cometChatManager.isCometChatUserLogedIn().then((function(t){e.cometChatManager.fetchNextGroups().then((function(t){e.setState({grouplist:[].concat(Object(h.a)(e.state.grouplist),Object(h.a)(t))})}),(function(e){console.error("Handle the erros in conatct List",e)}))}),(function(e){console.error("Handle the erros in conatct List",e)}))}},{key:"displayGroupList",value:function(){var e=this;if(this.state.grouplist.length>0)return this.state.grouplist.map((function(t,a){return s.a.createElement("div",{id:a,onClick:function(){return e.handleClick(t)},key:t.guid},s.a.createElement(U,{key:t.guid,group:t}),s.a.createElement(b.a,{className:"cp-list-seperator"}))}))}},{key:"render",value:function(){return s.a.createElement("div",{style:{height:"100%",overflow:"hidden"}},s.a.createElement("p",{className:"cp-contact-list-title font-extra-large"},"Groups"),s.a.createElement("p",{className:"cp-searchbar"},s.a.createElement("input",{className:"font-normal",type:"text",placeholder:"Search","aria-label":"Search"})),s.a.createElement("div",{className:"cp-userlist",onScroll:this.handleScroll},this.displayGroupList()))}}]),t}(s.a.Component),S=I;I.defaultProps={groupList:{}};a(58),a(59),a(60);var w=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={count:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"cp-badge-wrapper"},s.a.createElement("span",{className:"cp-badge"},this.state.count?this.state.count:""))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),t}(s.a.Component),x=w;w.defaultProps={src:""};var T=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={conversation:{}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"cp-conversationview",onClick:function(){e.props.onClick&&e.props.onClick(e.state.conversation)}},function(){switch(e.state.conversation.conversationType){case"user":return s.a.createElement(b.a,null,s.a.createElement(C.a,{className:"cp-conversation-avatar",xs:1},s.a.createElement(v,{src:e.state.conversation.conversationWith.avatar})),s.a.createElement(C.a,{className:"cp-user-info"},s.a.createElement("div",{className:"cp-username font-bold"},e.state.conversation.conversationWith.name," "),s.a.createElement("div",{className:"cp-time text-muted"}," ",new Date(1e3*e.state.conversation.lastMessage.sentAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})),s.a.createElement(x,{count:e.state.conversation.unreadMessageCount}),s.a.createElement(b.a,{className:"cp-userstatus"},s.a.createElement("span",{className:"text-muted "},e.state.conversation.lastMessage.data.text," "))));case"group":return s.a.createElement(b.a,null,s.a.createElement(C.a,{className:"cp-conversation-avatar",xs:1},s.a.createElement(v,{src:e.state.conversation.conversationWith.icon})),s.a.createElement(C.a,{className:"cp-user-info"},s.a.createElement("div",{className:"cp-username font-bold"},e.state.conversation.conversationWith.name),s.a.createElement("div",{className:"cp-time text-muted"}," ",new Date(1e3*e.state.conversation.lastMessage.sentAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})),s.a.createElement(x,{count:e.state.conversation.unreadMessageCount}),s.a.createElement(b.a,{className:"cp-userstatus"},e.state.conversation.lastMessage?s.a.createElement("span",{className:"text-muted cp-ellipsis "},e.state.conversation.lastMessage.data.text," "):s.a.createElement("span",{className:"text-muted cp-ellipsis "},"Tap to start a conversation."))));default:return null}}())}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),t}(s.a.Component),P=T;T.defaultProps={conversation:{}};var D=function(){function e(){Object(r.a)(this,e),this.conversationRequest=(new O.CometChat.ConversationsRequestBuilder).setLimit(20).build()}return Object(o.a)(e,[{key:"isCometChatUserLogedIn",value:function(){var e=this,t=0;return new Promise((function(a,n){1e4===t&&n(),e.isUserLogedIn=setInterval((function(){O.CometChat.isInitialized()?O.CometChat.getLoggedinUser().then((function(t){e.logedInUser=t,clearInterval(e.isUserLogedIn),a(t)}),(function(e){})):console.log("Else"),t=100}),100)}))}},{key:"fetchNextConversation",value:function(){return this.conversationRequest.fetchNext()}}]),e}(),R=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleClick=function(e,t){a.props.onItemClick(e,t)},a.state={conversationList:[],onItemClick:null},a.getConversationList=a.getConversationList.bind(Object(d.a)(a)),a.handleScroll=a.handleScroll.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.cometChatManager=new D,this.getConversationList()}},{key:"handleScroll",value:function(e){Math.round(e.currentTarget.scrollHeight-e.currentTarget.scrollTop)===Math.round(e.currentTarget.clientHeight)&&this.getConversationList()}},{key:"conversationUpdated",value:function(e){var t=this.state.conversationList;t.map((function(a,n){a.conversationId!==e.conversationId||t.splice(n,1,e)})),this.setState({conversationList:t})}},{key:"getConversationList",value:function(){var e=this;this.cometChatManager.isCometChatUserLogedIn().then((function(t){e.cometChatManager.fetchNextConversation().then((function(t){e.setState({conversationList:[].concat(Object(h.a)(e.state.conversationList),Object(h.a)(t))})}),(function(e){console.error("Handle the erros in conversation List",e)}))}),(function(e){console.error("Handle the erros in conversation List",e)}))}},{key:"displayConversationList",value:function(){var e=this;if(this.state.conversationList.length>0)return this.state.conversationList.map((function(t,a){return s.a.createElement("div",{id:a,onClick:function(){return e.handleClick(t.conversationWith,t.conversationType)},key:t.conversationId},s.a.createElement(P,{key:t.conversation,conversation:t}),s.a.createElement(b.a,{className:"cp-list-seperator"}))}))}},{key:"render",value:function(){return s.a.createElement("div",{style:{height:"100%",overflow:"hidden"}},s.a.createElement("p",{className:"cp-contact-list-title font-extra-large"},"Chats"),s.a.createElement("p",{className:"cp-searchbar"},s.a.createElement("input",{className:"font-normal",type:"text",placeholder:"Search","aria-label":"Search"})),s.a.createElement("div",{className:"cp-userlist",onScroll:this.handleScroll},this.displayConversationList()))}}]),t}(s.a.Component),H=R;R.defaultProps={conversationList:{}};var q=a(29),B=a.n(q),G=a(30),F=a.n(G),z=a(31),W=a.n(z),_=a(32),A=a.n(_),Q=a(33),J=a.n(Q),K=a(34),V=a.n(K),$=a(35),X=a.n($),Y=a(36),Z=a.n(Y),ee=a(37),te=a.n(ee),ae=a(38),ne=a.n(ae),se=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={src:"",activeTab:"contacts"},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"onTabChange",value:function(e){this.setState({activeTab:e})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"cp-navbar"},s.a.createElement("div",{className:"cp-navbar"},function(){switch(e.state.activeTab){case"contacts":return s.a.createElement(j,{onItemClick:e.props.onItemSelected});case"calls":return"calls";case"conversations":return s.a.createElement(H,{onItemClick:e.props.onItemSelected});case"groups":return s.a.createElement(S,{onItemClick:e.props.onItemSelected});case"info":return"info"}}()),s.a.createElement("div",{className:"tab"},s.a.createElement("button",{onClick:function(){return e.onTabChange("contacts")}},s.a.createElement("img",{src:"contacts"===this.state.activeTab?F.a:B.a,alt:"contacts"})),s.a.createElement("button",{style:{display:"none"},onClick:function(){return e.onTabChange("calls")}},s.a.createElement("img",{src:"calls"===this.state.activeTab?A.a:W.a,alt:"calls"})),s.a.createElement("button",{onClick:function(){return e.onTabChange("conversations")}},s.a.createElement("img",{src:"conversations"===this.state.activeTab?V.a:J.a,alt:"conversations"})),s.a.createElement("button",{onClick:function(){return e.onTabChange("groups")}},s.a.createElement("img",{src:"groups"===this.state.activeTab?Z.a:X.a,alt:"groups"})),s.a.createElement("button",{onClick:function(){return e.onTabChange("info")}},s.a.createElement("img",{src:"info"===this.state.activeTab?ne.a:te.a,alt:"info"}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),t}(s.a.Component),ie=se;se.defaultProps={src:""};var ce=a(18),re=a.n(ce),oe=a(39),le=(a(62),a(63),a(19)),ue=a.n(le),me=a(20),he=a.n(me),de=a(21),pe=a.n(de),ge=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={conversation:{}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"cp-chatheader"},"user"===this.state.type?s.a.createElement(b.a,null,s.a.createElement(C.a,{className:"cp-chat-avatar",xs:1},s.a.createElement(v,{src:this.state.item?this.state.item.avatar:""})),s.a.createElement(C.a,{className:"cp-user-info"},s.a.createElement("div",{className:"cp-username font-bold"},this.state.item?this.state.item.name:""," "),s.a.createElement("div",{className:"cp-chathead-buttons "},s.a.createElement("button",null,s.a.createElement("img",{src:ue.a,alt:"call"})),s.a.createElement("button",null,s.a.createElement("img",{src:pe.a,alt:"video call"})),s.a.createElement("button",null,s.a.createElement("img",{src:he.a,alt:"details"}))),s.a.createElement(b.a,{className:"cp-userstatus"},s.a.createElement("span",{className:"text-muted "}," ",this.state.item?this.state.item.status:""," ")))):s.a.createElement(b.a,null,s.a.createElement(C.a,{className:"cp-chat-avatar",xs:1},s.a.createElement(v,{src:this.state.item?this.state.item.icon:""})),s.a.createElement(C.a,{className:"cp-user-info"},s.a.createElement("div",{className:"cp-username font-bold"},this.state.item?this.state.item.name:""," "),s.a.createElement("div",{className:"cp-chathead-buttons "},s.a.createElement("button",null,s.a.createElement("img",{src:ue.a,alt:"call"})),s.a.createElement("button",null,s.a.createElement("img",{src:pe.a,alt:"video call"})),s.a.createElement("button",null,s.a.createElement("img",{src:he.a,alt:"details"}))),s.a.createElement(b.a,{className:"cp-userstatus"},s.a.createElement("span",{className:"text-muted "}," ",this.state.item?this.state.item.type:""," ")))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),t}(s.a.Component),fe=ge;ge.defaultProps={};a(64);var ve=a(40),be=a.n(ve),Ce=a(41),Ee=a.n(Ce),ye=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleSendMessageOnEnter=function(e){if("Enter"===e.key){var t;console.log("do validate",e.target.value),t="user"===a.state.type?a.state.item.uid:a.state.item.guid;var n=e.target.value,s=a.state.type,i=new O.CometChat.TextMessage(t,n,s);O.CometChat.sendMessage(i).then((function(e){console.log("Message sent successfully:"),document.getElementById("messageInput").value="",a.state.onMessageSent&&a.state.onMessageSent(e)}),(function(e){console.log("Message sending failed with error:",e)}))}},a.handleSendMessage=function(){var e=document.getElementById("messageInput").value;if(e){var t;t="user"===a.state.type?a.state.item.uid:a.state.item.guid;var n=e,s=a.state.type,i=new O.CometChat.TextMessage(t,n,s);O.CometChat.sendMessage(i).then((function(e){console.log("Message sent successfully:",a.state.onMessageSent),console.log(a.state.onMessageSent),a.state.onMessageSent&&a.state.onMessageSent(e),document.getElementById("messageInput").value=""}),(function(e){console.log("Message sending failed with error:",e)}))}},a.state={conversation:{}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"cp-message-composer"},s.a.createElement("div",{className:"cp-media-button "},s.a.createElement("button",null,s.a.createElement("img",{src:be.a,alt:"media"}))),s.a.createElement("input",{type:"text",placeholder:"Messages",id:"messageInput",onKeyDown:this.handleSendMessageOnEnter}),s.a.createElement("div",{className:"cp-send-button "},s.a.createElement("button",{onClick:this.handleSendMessage},s.a.createElement("img",{src:Ee.a,alt:"media"}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),t}(s.a.Component),Oe=ye;ye.defaultProps={};a(65),a(66);var ke=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:" cp-sender-message-container"},s.a.createElement("div",{className:" cp-sender-message"},this.state.message.text))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),t}(s.a.Component),Le=ke;ke.defaultProps={};a(67);var je=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:" cp-receiver-message-container"},s.a.createElement("div",{className:" cp-receiver-message"},this.state.message.text))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),t}(s.a.Component),Ne=je;je.defaultProps={};var Ue=function(){function e(t,a){if(Object(r.a)(this,e),"user"===a){var n=t.uid;this.messagesRequest=(new O.CometChat.MessagesRequestBuilder).setLimit(10).setUID(n).build()}else{var s=t.guid;this.messagesRequest=(new O.CometChat.MessagesRequestBuilder).setLimit(10).setGUID(s).build()}}return Object(o.a)(e,[{key:"isCometChatUserLogedIn",value:function(){var e=this,t=0;return new Promise((function(a,n){1e4===t&&n(),e.isUserLogedIn=setInterval((function(){O.CometChat.isInitialized()&&O.CometChat.getLoggedinUser().then((function(t){e.logedInUser=t,clearInterval(e.isUserLogedIn),a(t)}),(function(e){})),t=100}),100)}))}},{key:"fetchPreviousMessages",value:function(){return this.messagesRequest.fetchPrevious()}},{key:"attachMessageListener",value:function(e){O.CometChat.addUserListener("UNIQUE_LISTENER_ID",new O.CometChat.UserListener({onUserOnline:function(t){console.log("On User Online:",{onlineUser:t}),e(t)},onUserOffline:function(t){console.log("On User Offline:",{offlineUser:t}),e(t)}}))}}]),e}(),Me=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).scrollToBottom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;a.messagesEnd&&(a.messagesEnd.scrollTop=a.messagesEnd.scrollHeight-e)},a.handleClick=function(e){a.props.onItemClick(e,"message")},a.state={messageList:[],onItemClick:null,item:[],type:"",loggedInUser:{}},a.getMessagesList=a.getMessagesList.bind(Object(d.a)(a)),a.handleScroll=a.handleScroll.bind(Object(d.a)(a)),a.messagesEnd=s.a.createRef(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.scrollToBottom(),this.cometChatManager=new Ue(this.props.item,this.props.type),this.getMessagesList(),this.cometChatManager.attachMessageListener(this.messageUpdated)}},{key:"componentDidUpdate",value:function(e,t){var a=this;t.inputMessageList!==this.state.inputMessageList&&this.setState({messageList:[].concat(Object(h.a)(this.state.messageList),Object(h.a)(this.state.inputMessageList))},(function(){a.scrollToBottom()})),"user"===e.type?t.item.uid!==this.state.item.uid&&(this.cometChatManager=new Ue(this.props.item,this.props.type),this.setState({messageList:[]}),this.getMessagesList(),this.cometChatManager.attachMessageListener(this.messageUpdated)):e.item.guid!==this.props.item.guid&&(this.cometChatManager=new Ue(this.props.item,this.props.type),this.setState({messageList:[]}),this.getMessagesList(),this.cometChatManager.attachMessageListener(this.messageUpdated))}},{key:"handleScroll",value:function(e){var t=0===Math.round(e.currentTarget.scrollTop);t&&(console.log(t),this.getMessagesList())}},{key:"messageUpdated",value:function(e){var t=this.state.messageList;t.map((function(a,n){a.uid!==e.uid||t.splice(n,1,e)})),this.setState({messageList:t})}},{key:"getMessagesList",value:function(){var e=this;this.cometChatManager.isCometChatUserLogedIn().then((function(t){e.cometChatManager.fetchPreviousMessages().then((function(a){var n=e.messagesEnd.scrollHeight;e.setState({messageList:[].concat(Object(h.a)(e.state.messageList),Object(h.a)(a)),loggedInUser:t}),e.scrollToBottom(n)}),(function(e){console.error("Handle the erros in conatct List",e)}))}),(function(e){console.error("Handle the erros in conatct List",e)}))}},{key:"displayMessages",value:function(){var e=this;if(this.state.messageList.length>0)return this.state.messageList.map((function(t,a){return s.a.createElement("div",{id:a,key:t.id},e.state.loggedInUser.uid===t.sender.uid?s.a.createElement(Le,{message:t}):s.a.createElement(Ne,{message:t}))}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{ref:function(t){e.messagesEnd=t},className:"cp-chat-window",onScroll:this.handleScroll},this.displayMessages())}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.item!==t.item||e.inputMessageList!==t.inputMessageList?(console.log("yes we are here and if"),e):null}}]),t}(s.a.Component),Ie=Me;Me.defaultProps={};var Se=function(){function e(){Object(r.a)(this,e),this.messagesRequest=(new O.CometChat.MessagesRequestBuilder).setLimit(30).build()}return Object(o.a)(e,[{key:"isCometChatUserLogedIn",value:function(){var e=this,t=0;return new Promise((function(a,n){1e4===t&&n(),e.isUserLogedIn=setInterval((function(){O.CometChat.isInitialized()?O.CometChat.getLoggedinUser().then((function(t){e.logedInUser=t,clearInterval(e.isUserLogedIn),a(t)}),(function(e){})):console.log("Else"),t=100}),100)}))}},{key:"fetchNextChat",value:function(){return this.messagesRequest.fetchNext()}}]),e}(),we=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={chatList:[],onItemClick:null,messages:void 0},a.getChatList=a.getChatList.bind(Object(d.a)(a)),a.handleScroll=a.handleScroll.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.cometChatManager=new Se,this.getChatList()}},{key:"handleScroll",value:function(e){Math.round(e.currentTarget.scrollHeight-e.currentTarget.scrollTop)===Math.round(e.currentTarget.clientHeight)&&this.getChatList()}},{key:"chatUpdated",value:function(e){var t=this.state.chatList;t.map((function(a,n){a.conversationId!==e.conversationId||t.splice(n,1,e)})),this.setState({chatList:t})}},{key:"getChatList",value:function(){var e=this;this.cometChatManager.isCometChatUserLogedIn().then((function(t){e.cometChatManager.fetchNextChat().then((function(t){e.setState({chatList:[].concat(Object(h.a)(e.state.chatList),Object(h.a)(t))})}),(function(e){console.error("Handle the erros in conversation List",e)}))}),(function(e){console.error("Handle the erros in conversation List",e)}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"cp-chatview-container"},s.a.createElement(fe,{item:this.state.item,type:this.state.type}),s.a.createElement("div",{className:"cp-chatwindow-conatiner"},s.a.createElement(Ie,{inputMessageList:void 0!==this.state.messages?this.state.messages:console.log("yes"),item:this.state.item,type:this.state.type})),s.a.createElement(Oe,{onMessageSent:function(){var t=Object(oe.a)(re.a.mark((function t(a){return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({messages:[a]});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),item:this.state.item,type:this.state.type}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),t}(s.a.Component),xe=we;we.defaultProps={chatView:{}};var Te=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).changeTheme=function(e){a.setState({darktheme:!a.state.darktheme})},a.state={darktheme:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"row cometchat-container "+(this.state.darktheme?"dark":"light")},s.a.createElement("div",{className:"col-lg-3 col-sm-6 col-xs-12 cp-lists-container"},s.a.createElement("div",{className:"cp-lists"},s.a.createElement(ie,{onItemSelected:function(t,a){e.setState({item:t,type:a})}}))),s.a.createElement("div",{className:"col-lg-9 col-sm-6 col-xs-12 cp-lists-container"},this.state.item?s.a.createElement(xe,this.state):s.a.createElement("h1",{className:"cp-center-text"},"Select a chat to start messaging"),s.a.createElement("label",{className:"switch"},s.a.createElement("input",{type:"checkbox",onChange:this.changeTheme}),s.a.createElement("span",{className:"slider round"}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),t}(s.a.Component),Pe=Te;Te.defaultProps={launch:{}};a(68);var De=a(16),Re=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){O.CometChat.login("nishanttiwari","606028d3c3ecff1b2014886376054ada6621ef97").then((function(e){console.log("Login Successful:",{user:e})}),(function(e){console.log("Login failed with exception:",{error:e})}))}},{key:"render",value:function(){return s.a.createElement(De.a,null,s.a.createElement(Pe,null))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var He=(new O.CometChat.AppSettingsBuilder).subscribePresenceForAllUsers().setRegion("us").build();O.CometChat.init("9992e0c46c915d",He).then((function(){console.log("Initialization completed successfully"),c.a.render(s.a.createElement(De.a,null,s.a.createElement(Re,null)),document.getElementById("root"))}),(function(e){console.log("Initialization failed with error:",e)})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}]),[[44,1,2]]]);
//# sourceMappingURL=main.4398bd54.chunk.js.map